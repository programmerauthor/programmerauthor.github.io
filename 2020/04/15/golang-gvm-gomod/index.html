<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Golang版本工具GVM 和 包管理工具 Go mod"><meta name="keywords" content="Golang,版本管理"><meta name="author" content="普通程序员"><meta name="copyright" content="普通程序员"><title>Golang版本工具GVM 和 包管理工具 Go mod | 普通程序员</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">普通程序员</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">37</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">51</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">51</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">普通程序员</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Golang版本工具GVM 和 包管理工具 Go mod</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-04-15</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Golang/">Golang</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Golang/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">版本管理</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/04/15/golang-gvm-gomod/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/04/15/golang-gvm-gomod/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h2 id="一句话简介"><a href="#一句话简介" class="headerlink" title="一句话简介"></a>一句话简介</h2><h3 id="GVM（Go-Version-Manager）"><a href="#GVM（Go-Version-Manager）" class="headerlink" title="GVM（Go Version Manager）"></a>GVM（Go Version Manager）</h3><blockquote>
<p>下载多版本golang到本地缓存，通过切换环境变量指向不同的Golang版本</p>
</blockquote>
<h3 id="Go-mod"><a href="#Go-mod" class="headerlink" title="Go mod"></a>Go mod</h3><blockquote>
<p>对 go modules 的依赖管理，使得不同项目中依赖不同版本的同一个库更简单。</p>
</blockquote>
<h2 id="进一步介绍"><a href="#进一步介绍" class="headerlink" title="进一步介绍"></a>进一步介绍</h2><h3 id="GVM配置环境变量的原理"><a href="#GVM配置环境变量的原理" class="headerlink" title="GVM配置环境变量的原理"></a>GVM配置环境变量的原理</h3><ul>
<li><p><code>gvm</code>配置路径</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /Users/name/.gvm/scripts/gvm</span></span><br><span class="line">export GVM_ROOT=/Users/name/.gvm</span><br><span class="line">. $GVM_ROOT/scripts/gvm-default</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>gvm</code>配置后的 golang 环境变量</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash">go env</span></span><br><span class="line">GO111MODULE=""</span><br><span class="line">GOARCH="amd64"</span><br><span class="line">GOBIN=""</span><br><span class="line">GOCACHE="/Users/name/Library/Caches/go-build"</span><br><span class="line">GOENV="/Users/name/Library/Application Support/go/env"</span><br><span class="line">GOEXE=""</span><br><span class="line">GOFLAGS=""</span><br><span class="line">GOHOSTARCH="amd64"</span><br><span class="line">GOHOSTOS="darwin"</span><br><span class="line">GONOPROXY=""</span><br><span class="line">GONOSUMDB=""</span><br><span class="line">GOOS="darwin"</span><br><span class="line">GOPATH="/Users/name/.gvm/pkgsets/go1.13.10/global" #路径带了版本标识: go1.13.10 </span><br><span class="line">GOPRIVATE=""</span><br><span class="line">GOPROXY="https://proxy.golang.org,direct"</span><br><span class="line">GOROOT="/Users/name/.gvm/gos/go1.13.10" #路径带了版本标识: go1.13.10 </span><br><span class="line">GOSUMDB="sum.golang.org"</span><br><span class="line">GOTMPDIR=""</span><br><span class="line">GOTOOLDIR="/Users/name/.gvm/gos/go1.13.10/pkg/tool/darwin_amd64" #路径带了版本标识</span><br><span class="line">GCCGO="gccgo"</span><br><span class="line">AR="ar"</span><br><span class="line">CC="clang"</span><br><span class="line">CXX="clang++"</span><br><span class="line">CGO_ENABLED="1"</span><br><span class="line">GOMOD=""</span><br><span class="line">CGO_CFLAGS="-g -O2"</span><br><span class="line">CGO_CPPFLAGS=""</span><br><span class="line">CGO_CXXFLAGS="-g -O2"</span><br><span class="line">CGO_FFLAGS="-g -O2"</span><br><span class="line">CGO_LDFLAGS="-g -O2"</span><br><span class="line">PKG_CONFIG="pkg-config"</span><br><span class="line">GOGCCFLAGS="-fPIC -m64 -pthread -fno-caret-diagnostics -Qunused-arguments -fmessage-length=0 -fdebug-prefix-map=/var/folders/k2/sl1g0vys41q4msqx6hd40_hh0000gn/T/go-build407280275=/tmp/go-build -gno-record-gcc-switches -fno-common"</span><br></pre></td></tr></table></figure>

<ul>
<li><p>从上面的 <code>go env</code> 配置可以看到，通过 gvm 管理的 golang 关键环境变量都带上了golang的版本标识</p>
<ul>
<li><code>GOPATH=&quot;/Users/name/.gvm/pkgsets/go1.13.10/global&quot;</code></li>
<li><code>GOROOT=&quot;/Users/name/.gvm/gos/go1.13.10&quot;</code></li>
<li><code>GOTOOLDIR=&quot;/Users/name/.gvm/gos/go1.13.10/pkg/tool/darwin_amd64&quot;</code></li>
</ul>
<blockquote>
<p>这就代表着 ~/.gvm/ 路径下可以同时存在多个 golang 版本，通过 gvm 命令切换指定版本的golang路径即可完成版本的切换。</p>
<p>这跟手动下载多个golang版本，每次切换手动配置环境变量指向是一样的道理。只不过 gvm 封装了这些操作，让这件事变得很轻松的实现。</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<h3 id="Go-mod-1"><a href="#Go-mod-1" class="headerlink" title="Go mod"></a>Go mod</h3><h4 id="go-mod-作用详解"><a href="#go-mod-作用详解" class="headerlink" title="go mod 作用详解"></a>go mod 作用详解</h4><ul>
<li><p>类似于Android Gradle，每个项目单独配置依赖 modules</p>
</li>
<li><p>Go1.12 版本以前的 go module 依赖是直接全局下载到 GoPath 路径下，当不同的项目使用不同版本的依赖库时，就会变得非常麻烦，因为 GoPath 下只保存了一个版本的依赖库。在以往这需要手动拷贝一份相关依赖库，到其他路径给不同的项目用。</p>
</li>
<li><p>go mod 起到的作用是，它可以管理一个依赖库的多个版本同时存在。</p>
</li>
</ul>
<h4 id="go-mod-库版本管理的原理"><a href="#go-mod-库版本管理的原理" class="headerlink" title="go mod 库版本管理的原理"></a>go mod 库版本管理的原理</h4><blockquote>
<p>go mod 维护了两个主要文件 go.sum 和 go.mod</p>
</blockquote>
<ul>
<li><p>go.mod 维护了项目的golang版本以及golang依赖的库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat go.mod</span></span><br><span class="line">module /go/mod-demo</span><br><span class="line">go 1.12</span><br><span class="line">require (</span><br><span class="line">    github.com/PuerkitoBio/goquery v1.5.0 // indirect</span><br><span class="line">    github.com/antchfx/htmlquery v1.0.0 // indirect</span><br><span class="line">    github.com/antchfx/xmlquery v1.0.0 // indirect</span><br><span class="line">    github.com/antchfx/xpath v0.0.0–20190319080838-ce1d48779e67 // indirect</span><br><span class="line">    github.com/gobwas/glob v0.2.3 // indirect</span><br><span class="line">    github.com/gocolly/colly v1.2.0</span><br><span class="line">    github.com/kennygrant/sanitize v1.2.4 // indirect</span><br><span class="line">    github.com/saintfish/chardet v0.0.0–20120816061221–3af4cd4741ca // indirect</span><br><span class="line">    github.com/temoto/robotstxt v0.0.0–20180810133444–97ee4a9ee6ea // indirect</span><br><span class="line">    golang.org/x/net v0.0.0–20190522155817-f3200d17e092 // indirect</span><br><span class="line">    google.golang.org/appengine v1.6.0 // indirect</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>go.sum 维护了项目依赖库的版本管理信息，类似 svn/git 的一个库版本记录，可以切换同一个库的不同版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">cat go.sum</span><br><span class="line">github.com/PuerkitoBio/goquery v1.5.0 h1:uGvmFXOA73IKluu/F84Xd1tt/z07GYm8X49XKHP7EJk=</span><br><span class="line">github.com/PuerkitoBio/goquery v1.5.0/go.mod h1:qD2PgZ9lccMbQlc7eEOjaeRlFQON7xY8kdmcsrnKqMg=</span><br><span class="line">github.com/andybalholm/cascadia v1.0.0 h1:hOCXnnZ5A+3eVDX8pvgl4kofXv2ELss0bKcqRySc45o=</span><br><span class="line">github.com/andybalholm/cascadia v1.0.0/go.mod h1:GsXiBklL0woXo1j/WYWtSYYC4ouU9PqHO0sqidkEA4Y=</span><br><span class="line">github.com/antchfx/htmlquery v1.0.0 h1:O5IXz8fZF3B3MW+B33MZWbTHBlYmcfw0BAxgErHuaMA=</span><br><span class="line">github.com/antchfx/htmlquery v1.0.0/go.mod h1:MS9yksVSQXls00iXkiMqXr0J+umL/AmxXKuP28SUJM8=</span><br><span class="line">github.com/antchfx/xmlquery v1.0.0 h1:YuEPqexGG2opZKNc9JU3Zw6zFXwC47wNcy6/F8oKsrM=</span><br><span class="line">github.com/antchfx/xmlquery v1.0.0/go.mod h1:/+CnyD/DzHRnv2eRxrVbieRU/FIF6N0C+7oTtyUtCKk=</span><br><span class="line">github.com/antchfx/xpath v0.0.0–20190319080838-ce1d48779e67 h1:uj4UuiIs53RhHSySIupR1TEIouckjSfnljF3QbN1yh0=</span><br><span class="line">github.com/antchfx/xpath v0.0.0–20190319080838-ce1d48779e67/go.mod h1:Yee4kTMuNiPYJ7nSNorELQMr1J33uOpXDMByNYhvtNk=</span><br><span class="line">github.com/gobwas/glob v0.2.3 h1:A4xDbljILXROh+kObIiy5kIaPYD8e96x1tgBhUI5J+Y=</span><br><span class="line">github.com/gobwas/glob v0.2.3/go.mod h1:d3Ez4x06l9bZtSvzIay5+Yzi0fmZzPgnTbPcKjJAkT8=</span><br><span class="line">github.com/gocolly/colly v1.2.0 h1:qRz9YAn8FIH0qzgNUw+HT9UN7wm1oF9OBAilwEWpyrI=</span><br><span class="line">github.com/gocolly/colly v1.2.0/go.mod h1:Hof5T3ZswNVsOHYmba1u03W65HDWgpV5HifSuueE0EA=</span><br><span class="line">github.com/golang/protobuf v1.2.0 h1:P3YflyNX/ehuJFLhxviNdFxQPkGK5cDcApsge1SqnvM=</span><br><span class="line">github.com/golang/protobuf v1.2.0/go.mod h1:6lQm79b+lXiMfvg/cZm0SGofjICqVBUtrP5yJMmIC1U=github.com/kennygrant/sanitize v1.2.4 h1:gN25/otpP5vAsO2djbMhF/LQX6R7+O1TB4yv8NzpJ3o=</span><br><span class="line">github.com/kennygrant/sanitize v1.2.4/go.mod h1:LGsjYYtgxbetdg5owWB2mpgUL6e2nfw2eObZ0u0qvak=</span><br><span class="line">github.com/saintfish/chardet v0.0.0–20120816061221–3af4cd4741ca h1:NugYot0LIVPxTvN8n+Kvkn6TrbMyxQiuvKdEwFdR9vI=</span><br><span class="line">github.com/saintfish/chardet v0.0.0–20120816061221–3af4cd4741ca/go.mod h1:uugorj2VCxiV1x+LzaIdVa9b4S4qGAcH6cbhh4qVxOU=</span><br><span class="line">github.com/temoto/robotstxt v0.0.0–20180810133444–97ee4a9ee6ea h1:hH8P1IiDpzRU6ZDbDh/RDnVuezi2oOXJpApa06M0zyI=</span><br><span class="line">github.com/temoto/robotstxt v0.0.0–20180810133444–97ee4a9ee6ea/go.mod h1:aOux3gHPCftJ3KHq6Pz/AlDjYJ7Y+yKfm1gU/3B0u04=</span><br><span class="line">golang.org/x/crypto v0.0.0–20190308221718-c2843e01d9a2/go.mod h1:djNgcEr1/C05ACkg1iLfiJU5Ep61QUkGW8qpdssI0+w=</span><br><span class="line">golang.org/x/net v0.0.0–20180218175443-cbe0f9307d01/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=</span><br><span class="line">golang.org/x/net v0.0.0–20180724234803–3673e40ba225/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=</span><br><span class="line">golang.org/x/net v0.0.0–20181114220301-adae6a3d119a/go.mod h1:mL1N/T3taQHkDXs73rZJwtUhF3w3ftmwwsq0BUmARs4=</span><br><span class="line">golang.org/x/net v0.0.0–20190522155817-f3200d17e092 h1:4QSRKanuywn15aTZvI/mIDEgPQpswuFndXpOj3rKEco=</span><br><span class="line">golang.org/x/net v0.0.0–20190522155817-f3200d17e092/go.mod h1:HSz+uSET+XFnRR8LxR5pz3Of3rY3CfYBVs4xY44aLks=</span><br><span class="line">golang.org/x/sys v0.0.0–20190215142949-d0b11bdaac8a/go.mod h1:STP8DvDyc/dI5b8T5hshtkjS+E42TnysNCUPdjciGhY=</span><br><span class="line">golang.org/x/text v0.3.0 h1:g61tztE5qeGQ89tm6NTjjM9VPIm088od1l6aSorWRWg=</span><br><span class="line">golang.org/x/text v0.3.0/go.mod h1:NqM8EUOU14njkJ3fqMW+pc6Ldnwhi/IjpwHt7yyuwOQ=</span><br><span class="line">google.golang.org/appengine v1.6.0 h1:Tfd7cKwKbFRsI8RMAD3oqqw7JPFRrvFlOsfbgVkjOOw=</span><br><span class="line">google.golang.org/appengine v1.6.0/go.mod h1:xpcJRLb0r/rnEns0DIKYYv+WjYCduHsrkT7/EB5XEv4=</span><br></pre></td></tr></table></figure>

<p>这样当使用同一个库的不同版本时，可以根据 go.sum 记录的版本信息，为不同项目依赖切换对应的库版本。</p>
</li>
</ul>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="[https://medium.com/golang-%E7%AD%86%E8%A8%98/gvm-go-mod-492a54c15c41](https://medium.com/golang-筆記/gvm-go-mod-492a54c15c41)">优秀Go mod介绍文章</a></p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">普通程序员</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://programmerauthor.github.io/2020/04/15/golang-gvm-gomod/">https://programmerauthor.github.io/2020/04/15/golang-gvm-gomod/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://programmerauthor.github.io">普通程序员</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Golang/">Golang</a><a class="post-meta__tags" href="/tags/%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/">版本管理</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2020/04/19/xmind-case/"><i class="fa fa-chevron-left">  </i><span>思维导图例子</span></a></div><div class="next-post pull-right"><a href="/2020/04/14/svn-change-remote/"><span>SVN修改远程主机地址</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://programmerauthor.github.io/2020/04/15/golang-gvm-gomod/';
  this.page.identifier = '2020/04/15/golang-gvm-gomod/';
  this.page.title = 'Golang版本工具GVM 和 包管理工具 Go mod';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'programmerauthor' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://programmerauthor.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2022 By 普通程序员</div><div class="framework-info"><span>驱动 - <span>Hexo</span></span><span class="footer-separator">|</span><span>主题 - <span>Melody</span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>