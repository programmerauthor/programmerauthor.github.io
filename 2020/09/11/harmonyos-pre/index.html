<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="harmonyos预览"><meta name="keywords" content="huawei,harmonyos"><meta name="author" content="普通程序员"><meta name="copyright" content="普通程序员"><title>harmonyos预览 | 普通程序员</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.1"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.1"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css?version=1.6.1"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  }
} </script><meta name="generator" content="Hexo 4.2.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="author-info"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">普通程序员</div><div class="author-info__description text-center"></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">文章</span><span class="pull-right">37</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">标签</span><span class="pull-right">51</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">分类</span><span class="pull-right">51</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">普通程序员</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">首页</a><a class="site-page" href="/archives">归档</a><a class="site-page" href="/tags">标签</a><a class="site-page" href="/categories">分类</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">harmonyos预览</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2020-09-11</time><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/os/">os</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/os/harmonyos/">harmonyos</a><span class="post-meta__separator">|</span><i class="fa fa-comment-o post-meta__icon" aria-hidden="true"></i><a href="/2020/09/11/harmonyos-pre/#disqus_thread"><span class="disqus-comment-count" data-disqus-identifier="2020/09/11/harmonyos-pre/"></span></a></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>鸿蒙开发者官网：<a href="https://developer.harmonyos.com/cn/home" target="_blank" rel="noopener">https://developer.harmonyos.com/cn/home</a></p>
<p>鸿蒙应用开发文档：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-guides/start-first-page-0000000000038014" target="_blank" rel="noopener">https://developer.harmonyos.com/cn/docs/documentation/doc-guides/start-first-page-0000000000038014</a></p>
<p>鸿蒙API文档：<a href="https://developer.harmonyos.com/cn/docs/documentation/doc-references/overview-0000001054518434" target="_blank" rel="noopener">https://developer.harmonyos.com/cn/docs/documentation/doc-references/overview-0000001054518434</a></p>
<p><img src="/images/harmonyos-pre.assets/image-20200911120617073.png" alt="image-20200911120617073"></p>
<p><img src="/images/harmonyos-pre.assets/image-20200911120556576.png" alt="image-20200911120556576"></p>
<p>真正的鸿蒙SDK API在 ohos.jar ，可以结合 鸿蒙API文档 查看。</p>
<p>开发语言有 Java，C/C++ ，JS 分别面向不同的开发场景，Java的开发体验跟Android基本一致，Android开发者可以无缝切入。</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911121823080.png" alt="image-20200911121823080"></p>
<p>Hap是鸿蒙的执行文件，里面包含了一个 classes.dex 和 entry_signed_entry.apk ，entry_signed_entry.apk 是个壳子，目前看来它的作用就是用来调起 根路径下的 classes.dex 。</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911122234836.png" alt="image-20200911122234836"></p>
<p>根路径的classes.dex里面的构建GUI的上层应用代码，基本脱离了AndroidAPI，但明显看出来是在仿着Android进行：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911122408179.png" alt="image-20200911122408179"></p>
<p>关于渲染引擎，官网只能找到资料是3D引擎支持 OpenGL 和 Vulkan, 2D 引擎没有看到任何资料，搞不好也可能是Skia，毕竟国内也没有成熟的好引擎，我们欠缺的太多了。</p>
<p>AIDL 仿了一个 IDL ，接口设计也类似，底层不知道也是仿着写的，还是直接复用了Android的机制。</p>
<p>JNI理论上应该支持，但是目前文档上没有看到介绍。</p>
<p>一些jetpack的东西，类似livedata 和 databinding的机制也仿了，线程操作引入了类似 RxJava的调度器机制。</p>
<p>没有什么高大上的东西，国内在操作系统领域跟国外技术代差太大了，只是新手在刷经验值的阶段，先模仿做好了，再想高大上的事情吧。</p>
<p>目前，看到或许是个优势的亮点，也就是超级虚拟终端的跨设备整合能力：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911123252293.png" alt="image-20200911123252293"></p>
<p>看文档介绍，这个能力可以让一个应用的A页面和B页面分别运行在不同的设备上，就好像在同一个设备上使用一样，能随便拖拽一个页面从A设备到B设备上，还可以继续使用，嗯，如果是这样的场景，还是挺香的。</p>
<p>再就是自己进行完整的系统设计，也是有优势的，例如，热更新能力想支持就能支持：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911123616871.png" alt="image-20200911123616871"></p>
<p>总的来说，按目前的资料看，鸿蒙就是仿了一个Android，进行艰难的国产化，三五年内想超越Android是不现实的，国内在操作系统这方面几乎等同于空白，能从仿一个开始起步，已经是最好的结果了。希望国产牛逼的，也要考虑到事物发展的定律，没有足够的积累，是无法横空出世一个厉害的操作系统的，罗马不是一天建成的。至少在现在这个阶段，完整的仿一个系统，按自己的理解进行重写，已经是一个好的开端了，系统层源码看不到，不清楚系统核心出来以后会是什么样，但至少现在，它迈出了第一步，应该给予鼓励和支持。</p>
<p>想要体验一下的，可以在官网直接下载 Huawei Dev Eco Studio ，直接新建Java版本的工程即可：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911131642793.png" alt="image-20200911131642793"></p>
<p>Huawei Dev Eco Studio 通过 IdeaA 改的，跟Android Studio 一样，使用方式相信做Android开发的同学都一看就懂。</p>
<p>目前鸿蒙开发的应用只能跑在鸿蒙机器上，手头没有鸿蒙机器，模拟器又不能用的情况下，只能使用华为的远程机器，通过 Tools -&gt; DevEco Login 登陆华为开发者账户，再使用 HVD  Manager 创建远程机器，就可以调试使用了。</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911131919255.png" alt="image-20200911131919255"></p>
<p>成功连接远程鸿蒙TV设备：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911133059504.png" alt="image-20200911133059504"></p>
<p>成功运行我们用鸿蒙SDK编写的Demo:</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911131747637.png" alt="image-20200911131747637"></p>
<p>再补充一下，现在华为的HVD Manager连接的服务还是个小水管，我昨晚下了100多遍才下载成功30M的插件。</p>
<p>开始都是10多Kb的速度，直到过了12点，可能下载的人少了，才到了100多Kb。</p>
<p>当你看到这个报错的时候：</p>
<p><img src="/images/harmonyos-pre.assets/image-20200911132229595.png" alt="image-20200911132229595"></p>
<p>不要慌，不是那个啥的梯问题，挂了外网也没用，反而会更慢，查了下网络连接也都是国内的服务，猜测就是它现阶段准备的带宽小水管太小，没想到这么多开发者一拥而上。</p>
<p>如果这种情况下，不能调试运行，也不要气馁。</p>
<p>虽然通过SDK的上层应用API发现已经跟Android切割了，但是可能鸿蒙的hap的打包体系还是借用Android的，使用Gradle打包，所以，我们的命令行依然是有效的：</p>
<p>windows:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gradlew.bat assembleRelease</span><br></pre></td></tr></table></figure>

<p>Mac/linux:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew assembleRelease</span><br></pre></td></tr></table></figure>

<p>一样是可以打出来hap包的，这时候解包就可以对鸿蒙的应用进行剖析了。</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">普通程序员</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://programmerauthor.github.io/2020/09/11/harmonyos-pre/">https://programmerauthor.github.io/2020/09/11/harmonyos-pre/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://programmerauthor.github.io">普通程序员</a>！</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/huawei/">huawei</a><a class="post-meta__tags" href="/tags/harmonyos/">harmonyos</a></div><nav id="pagination"><div class="next-post pull-right"><a href="/2020/06/12/webstorm-live-edit/"><span>WebStorm使用Live Edit功能实时调试</span><i class="fa fa-chevron-right"></i></a></div></nav><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'https://programmerauthor.github.io/2020/09/11/harmonyos-pre/';
  this.page.identifier = '2020/09/11/harmonyos-pre/';
  this.page.title = 'harmonyos预览';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'programmerauthor' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script><script id="dsq-count-scr" src="https://programmerauthor.disqus.com/count.js" async></script></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2022 By 普通程序员</div><div class="framework-info"><span>驱动 - <span>Hexo</span></span><span class="footer-separator">|</span><span>主题 - <span>Melody</span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.1"></script><script src="/js/fancybox.js?version=1.6.1"></script><script src="/js/sidebar.js?version=1.6.1"></script><script src="/js/copy.js?version=1.6.1"></script><script src="/js/fireworks.js?version=1.6.1"></script><script src="/js/transition.js?version=1.6.1"></script><script src="/js/scroll.js?version=1.6.1"></script><script src="/js/head.js?version=1.6.1"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>